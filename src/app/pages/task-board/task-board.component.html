<section class="task-board">
  <h2>Task Tracker Pro</h2>

  <form class="create-task" (ngSubmit)="createTask()">
    <div class="form-group">
      <input
        type="text"
        [(ngModel)]="newTaskTitle"
        name="title"
        placeholder="Enter task title"
        required />
    </div>
    <div class="form-group">
      <textarea
        [(ngModel)]="newTaskDescription"
        name="description"
        placeholder="Enter task description (optional)"></textarea>
    </div>
    <button type="submit" class="create-button">Create Task</button>
  </form>

  @if (isLoading(); as loading) {
    <p class="loading">Loading tasks...</p>
  } @else {
    <div class="columns">
      <div class="column">
        <h3>To Do</h3>
        @for (task of todo(); track task.id) {
          <div class="task">
            <div class="task-content">
              <div class="title">{{ task.title }}</div>
              @if (task.description) {
                <div class="description">{{ task.description }}</div>
              }
            </div>
            <div class="actions">
              <button
                (click)="moveTo(task.id, 'in-progress')"
                class="action-button">
                Start
              </button>
              <button (click)="deleteTask(task.id)" class="delete-button">
                Delete
              </button>
            </div>
          </div>
        }
      </div>

      <div class="column">
        <h3>In Progress</h3>
        @for (task of inProgress(); track task.id) {
          <div class="task">
            <div class="task-content">
              <div class="title">{{ task.title }}</div>
              @if (task.description) {
                <div class="description">{{ task.description }}</div>
              }
            </div>
            <div class="actions">
              <button (click)="moveTo(task.id, 'done')" class="action-button">
                Complete
              </button>
              <button (click)="deleteTask(task.id)" class="delete-button">
                Delete
              </button>
            </div>
          </div>
        }
      </div>

      <div class="column">
        <h3>Done</h3>
        @for (task of done(); track task.id) {
          <div class="task">
            <div class="task-content">
              <div class="title">{{ task.title }}</div>
              @if (task.description) {
                <div class="description">{{ task.description }}</div>
              }
            </div>
            <div class="actions">
              <button (click)="deleteTask(task.id)" class="delete-button">
                Delete
              </button>
            </div>
          </div>
        }
      </div>
    </div>
  }
</section>
